<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    </head>
    <style>
        .title {
            color: rgb(0, 21, 36);
            font-weight: bold;
            font-family: "Gill Sans", "Gill Sans MT", Calibri, "Trebuchet MS", sans-serif;
        }

        .text {
            color: rgb(0, 21, 36);
            font-family: "Gill Sans", "Gill Sans MT", Calibri, "Trebuchet MS", sans-serif;
        }
    </style>

    <body>
        <div style="width: 90%; margin-left: auto; margin-right: auto; margin-top: 10px; position: relative">
            <div style="margin-top: 30px;">
                <table style="width: 100%; border-collapse: collapse;">
                    <tr>
                        <th style="width: 70%; font-size: 30px; text-align: center; border: 1px solid black; border-bottom: none; padding: 10px;" class="title">LISTA DE PEDIDO</th>
                        <th style="width: 30%;">
                            <img
                                src="https://staticfileszyxme.s3.us-east.cloud-object-storage.appdomain.cloud/Laraigo-logo-name.svg"
                                width="100px"
                            />
                        </th>
                    </tr>
                    <tr>
                        <th class="title" style="width: 70%; border: 1px solid black; font-size: 15px; text-align: left; padding: 10px;">Nº Pedido: <span style="font-weight: normal;"><%= data[0].ordernumber %></span></th>
                        <th class="title" style="width: 30%; border: 1px solid black;">FECHA</th>
                    </tr>
                    <tr>
                        <th class="title" style="font-size: 15px; text-align: left; width: 70%; border: 1px solid black; padding: 10px;">Cliente / Empresa: <span style="font-weight: normal;"><%= data[0].client %></span></th>
                        <th class="text" style="width: 30%; border: 1px solid black; font-weight: normal;"><%= data[0].date %></th>
                    </tr>
                </table>
            </div>
            <div style="margin-top: 10px">
                <table style="border-collapse: collapse; width: 100%;">
                    <tr style="background-color: rgb(201, 201, 201)">
                        <th class="title" style="width: 30%; border: 1px solid black; padding: 10px;">Descripción</th>
                        <th class="title" style="width: 10%; border: 1px solid black; padding: 10px">UM</th>
                        <th class="title" style="width: 20%; border: 1px solid black; padding: 10px">Cantidad</th>
                        <th class="title" style="width: 20%; border: 1px solid black; padding: 10px">Precio Unitario</th>
                        <th class="title" style="width: 20%; border: 1px solid black; padding: 10px">Precio Total</th>
                    </tr>
                    <% var totalAmount = data[0].orders.reduce(function (acc, order) { return acc + order.amount; }, 0); %>
                    <% data[0].orders.forEach(function(element, index){ %>
                        <tr>
                            <td class="text" style="width: 30%; border: 1px solid black; padding: 10px;"><%= element.description %></td>
                            <td class="text" style="width: 10%; border: 1px solid black; padding: 10px; text-align: center;">Unidad</td>
                            <td class="text" style="width: 20%; border: 1px solid black; padding: 10px; text-align: center;"><%= element.quantity %></td>
                            <td class="text" style="width: 20%; border: 1px solid black; padding: 10px; text-align: center;"><%= element.unitprice %></td>
                            <td class="text" style="width: 20%; border: 1px solid black; padding: 10px; text-align: center;"><%= element.amount %></td>
                        </tr>
                    <% }); %>
                    <tr style="height: 10px;"></tr>
                    <tr>
                        <td style="width: 30%;"></td>
                        <td style="width: 10%;"></td>
                        <td style="width: 20%;"></td>
                        <td class="text" style="width: 20%; text-align: center; padding-right: 10px; font-weight: bold;">Monto Total</td>
                        <td class="text" style="width: 20%; border: 1px solid black; text-align: center; padding: 10px; font-weight: bold;"><%= totalAmount.toFixed(2) %></td>
                    </tr>
                </table>
            </div>
        </div>
    </body>
</html>
